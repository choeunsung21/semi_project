<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardMapper">
	<resultMap type="board" id="boardMap">
		<result property="boardNo" column="board_no" />
		<result property="writerNo" column="writer_no" />
		<result property="boardTitle" column="board_title" />
		<result property="boardContent" column="board_content" />
		<result property="userName" column="user_name" />
		<result property="regDate" column="reg_date" />
		<result property="modDate" column="mod_date" />
	</resultMap>	
	<select id="boardList" resultMap="boardMap">
		SELECT b.* ,u.*
		FROM `board` b
		JOIN `user` u
		ON b.writer_no = u.user_no
		<where>
		<if test='boardTitle != null and  boardTitle.equals("") == false'>
			b.board_title LIKE CONCAT('%',#{boardTitle},'%')
		</if>
		</where>
		ORDER BY b.board_no DESC
		LIMIT #{limitPageNo}, #{numPerPage}
	</select>
	
	<select id="selectBoardCount" resultType="int">
		SELECT COUNT(*) FROM `board`
		<where>
			<if test="boardTitle != null and boardTitle != ''">
            board_title LIKE CONCAT('%', #{boardTitle}, '%')
            </if>
		</where>
	</select>
</mapper>